<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Ordering System</title>
  <style>
    /* ... (keep existing styles) ... */
    .customer-info {
      margin-top: 20px;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 8px;
    }
    .customer-info input {
      width: 100%;
      padding: 8px;
      margin: 5px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .total-price {
      font-size: 18px;
      font-weight: bold;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ... (keep existing menu sections) ... -->

    <!-- Order Summary -->
    <div class="order-summary">
      <h2>Order Summary</h2>
      <ul id="order-list"></ul>
      <div class="total-price">Total: ₱<span id="total-price">0</span></div>
      
      <!-- Customer Information -->
      <div class="customer-info">
        <h3>Customer Details</h3>
        <input type="text" id="customer-name" placeholder="Full Name" required>
        <input type="text" id="customer-address" placeholder="Full Address" required>
        <input type="tel" id="customer-phone" placeholder="Phone Number" required>
      </div>
      
      <button class="place-order-btn" onclick="placeOrder()">Place Order</button>
    </div>
  </div>

  <script>
    // Function to update the order summary
    function updateOrderSummary() {
      const orderList = document.getElementById('order-list');
      const totalPriceElement = document.getElementById('total-price');
      orderList.innerHTML = '';
      let totalPrice = 0;

      // Add all menu items here with their IDs and base prices
      const items = [
        { id: 'expresso-qty', name: 'Expresso', price: 120 },
        { id: 'brewed-coffee-qty', name: 'Brewed Coffee', price: 80 },
        // Add all other menu items following the same pattern
        // Example:
        { id: 'chocolate-shake-qty', name: 'Chocolate Shake', price: 150 },
        { id: 'tuna-sandwich-qty', name: 'Tuna Sandwich', price: 130 },
        // ... Add all remaining items
      ];

      // Add-ons prices
      const addOnsPrices = {
        'whipped-cream': 20,
        'choco-chips': 30,
        'extra-cheese': 20,
        // ... Add all other add-ons
      };

      items.forEach(item => {
        const qty = document.getElementById(item.id).value;
        if (qty > 0) {
          const li = document.createElement('li');
          let itemTotal = qty * item.price;

          // Check for add-ons
          const addOns = document.querySelectorAll(`input[name="${item.name.toLowerCase().replace(/ /g, '-')}-add-ons"]:checked`);
          addOns.forEach(addOn => {
            itemTotal += addOnsPrices[addOn.value] * qty;
          });

          li.textContent = `${item.name} x ${qty} = ₱${itemTotal}`;
          orderList.appendChild(li);
          totalPrice += itemTotal;
        }
      });

      totalPriceElement.textContent = totalPrice;
    }

    // Function to place the order
    async function placeOrder() {
      const orderDetails = document.getElementById('order-list').innerText;
      const totalPrice = document.getElementById('total-price').innerText;
      const customerName = document.getElementById('customer-name').value;
      const customerAddress = document.getElementById('customer-address').value;
      const customerPhone = document.getElementById('customer-phone').value;

      if (!customerName || !customerAddress || !customerPhone) {
        alert('Please fill in all customer details');
        return;
      }

      const formData = new FormData();
      formData.append('Name', customerName);
      formData.append('Address', customerAddress);
      formData.append('Phone', customerPhone);
      formData.append('Order', orderDetails);
      formData.append('Total', `₱${totalPrice}`);

      try {
        const response = await fetch('https://formspree.io/f/xjkgerqg', {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });

        if (response.ok) {
          alert('Order placed successfully!');
          // Reset form
          document.querySelectorAll('input[type="number"]').forEach(input => input.value = 0);
          document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => checkbox.checked = false);
          document.getElementById('order-list').innerHTML = '';
          document.getElementById('total-price').textContent = '0';
          document.getElementById('customer-name').value = '';
          document.getElementById('customer-address').value = '';
          document.getElementById('customer-phone').value = '';
        } else {
          alert('Error placing order. Please try again.');
        }
      } catch (error) {
        alert('Error placing order. Please try again.');
      }
    }

    // Update summary when any input changes
    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('change', updateOrderSummary);
    });
  </script>
</body>
</html>
